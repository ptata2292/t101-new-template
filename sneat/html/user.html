<!DOCTYPE html>

<!-- =========================================================
* Sneat - Bootstrap 5 HTML Admin Template - Pro | v1.0.0
==============================================================

* Product Page: https://themeselection.com/products/sneat-bootstrap-html-admin-template/
* Created by: ThemeSelection
* License: You must have a valid license purchased in order to legally use the theme for your project.
* Copyright ThemeSelection (https://themeselection.com)

=========================================================
 -->
<!-- beautify ignore:start -->
<html
  lang="en"
  class="light-style layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="../assets/"
  data-template="vertical-menu-template-free"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>Tables - Basic Tables | Sneat - Bootstrap 5 HTML Admin Template - Pro</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- Icons. Uncomment required icon fonts -->
    <link rel="stylesheet" href="../assets/vendor/fonts/boxicons.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="../assets/vendor/css/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="../assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="../assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="../assets/vendor/js/helpers.js"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="../assets/js/config.js"></script>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->

        <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
          <img src="../../home_files/logo.png" alt="logo">

          <div class="menu-inner-shadow"></div>

          <ul class="menu-inner py-1">
            <!-- Dashboard -->
            <li class="menu-item">
              <a href="index.html" class="menu-link">
                <i class="menu-icon tf-icons bx bx-home-circle"></i>
                <div data-i18n="Analytics">Dashboard</div>
              </a>
            </li>

            <li class="menu-item">
              <a href="booking.html" class="menu-link">
                <!-- <i class="menu-icon tf-icons bx bx-home-circle"></i> -->
                <i class='menu-icon tf-icons bx bx-hotel'></i>
                <div data-i18n="Analytics">Booking</div>
              </a>
            </li>

            <li class="menu-item active">
              <a href="user.html" class="menu-link">
                <!-- <i class="menu-icon tf-icons bx bx-home-circle"></i> -->
                <i class="menu-icon tf-icons bx bx-user"></i>
                <i class=''></i>
                <div data-i18n="Analytics">Users</div>
              </a>
            </li>

            <li class="menu-item">
              <a href="roles.html" class="menu-link">
                <!-- <i class="menu-icon tf-icons bx bx-home-circle"></i> -->
                <i class="menu-icon tf-icons bx bx-check-shield"></i>
                <div data-i18n="Analytics">Roles</div>
              </a>
            </li>

            <li class="menu-item">
              <a href="company.html" class="menu-link">
                <!-- <i class="menu-icon tf-icons bx bx-home-circle"></i> -->
                <i class="menu-icon tf-icons bx bx-buildings"></i>
                <div data-i18n="Analytics">Companies</div>
              </a>
            </li>

            <!-- Layouts -->
            
          </ul>
        </aside>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <nav
            class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
            id="layout-navbar"
          >
            <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
              <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                <i class="bx bx-menu bx-sm"></i>
              </a>
            </div>

            <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
              <!-- Search -->
              <div class="navbar-nav align-items-center">
                <div class="nav-item d-flex align-items-center">
                  <i class="bx bx-search fs-4 lh-0"></i>
                  <input
                    type="text"
                    class="form-control border-0 shadow-none"
                    placeholder="Search..."
                    aria-label="Search..."
                  />
                </div>
              </div>
              <!-- /Search -->

              <ul class="navbar-nav flex-row align-items-center ms-auto">
                <!-- Place this tag where you want the button to render. -->
                <li class="nav-item lh-1 me-3">
                  <i class='bx bx-moon'></i>
                  <i class='bx bx-bell'></i>
                </li>

                <!-- User -->
                <li class="nav-item navbar-dropdown dropdown-user dropdown">
                  <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                    <div class="avatar avatar-online">
                      <img src="../../home_files/01.jpg" alt class="w-px-40 h-auto rounded-circle" />
                    </div>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                      <a class="dropdown-item" href="pages-account-settings-account.html">
                        <div class="d-flex">
                          <div class="flex-shrink-0 me-3">
                            <div class="avatar avatar-online">
                              <img src="../../home_files/01.jpg" alt class="w-px-40 h-auto rounded-circle" />
                            </div>
                          </div>
                          <div class="flex-grow-1">
                            <span class="fw-semibold d-block">John Doe</span>
                            <small class="text-muted">Admin</small>
                          </div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="pages-account-settings-account.html">
                        <i class="bx bx-user me-2"></i>
                        <span class="align-middle">My Profile</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">
                        <i class="bx bx-cog me-2"></i>
                        <span class="align-middle">Settings</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">
                        <span class="d-flex align-items-center align-middle">
                          <i class="flex-shrink-0 bx bx-credit-card me-2"></i>
                          <span class="flex-grow-1 align-middle">Billing</span>
                          <span class="flex-shrink-0 badge badge-center rounded-pill bg-danger w-px-20 h-px-20">4</span>
                        </span>
                      </a>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="../../index.html">
                        <i class="bx bx-power-off me-2"></i>
                        <span class="align-middle">Log Out</span>
                      </a>
                    </li>
                  </ul>
                </li>
                <!--/ User -->
              </ul>
            </div>
          </nav>
          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              <!-- Basic Bootstrap Table -->
              <div class="card">
                <div class="row">
                  <div class="col-8">
                    <h4 class="card-header"><strong style="color: #1c46a3; font-weight: 500;">Users</strong></h4>
                  </div>
                  <div class="col-2" style="align-content: center;">
                    <input
                          type="text"
                          id="modalEditTaxID"
                          name="modalEditTaxID"
                          class="form-control modal-edit-tax-id"
                          placeholder="Search User" />
                  </div>
                  <div class="col-2" style="align-content: center;">
                    <button
                      data-bs-target="#editUser"
                      data-bs-toggle="modal"
                      id="add-new"
                      class="btn btn-primary text-nowrap add-new-role">
                      ADD NEW
                    </button>    
                  </div>
                </div>
                <div class="table-responsive text-nowrap">
                  <table class="table">
                    <thead>
                      <tr style="background-color: #fafafc;">
                        <th></th>
                        <th>USER</th>
                        <th>COMPANY</th>
                        <th>ROLE</th>
                        <th>BIRTHDAY</th>
                        <th>GENDER</th>
                        <th>PHONE</th>
                        <th>IS ACTIVE</th>
                        <th>ACTIONS</th>
                      </tr>
                    </thead>
                    <tbody class="table-border-bottom-0" id="dataCompany" style="border-top: 0px solid #fff;">
                      <tr>
                        <td>
                          <ul class="list-unstyled users-list m-0 avatar-group d-flex align-items-center">
                            <li
                              data-bs-toggle="tooltip"
                              data-popup="tooltip-custom"
                              data-bs-placement="top"
                              class="avatar avatar-xs pull-up"
                              title="Lilian Fuller"
                            >
                              <img src="../assets/img/avatars/5.png" alt="Avatar" class="rounded-circle" />
                            </li>
                          </ul>
                        </td>
                        <td>Albert Cook</td>
                        <td>Albert Cook</td>
                        <td>Albert Cook</td>
                        <td>Albert Cook</td>
                        <td>Albert Cook</td>
                        <td>Albert Cook</td>
                        <td><span class="badge bg-label-success ">ACTIVE</span></td>
                        <td>
                          <i class="bx bx-edit"></i><i class="bx bx-trash "></i>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <!--/ Basic Bootstrap Table -->

            </div>
            <!-- / Content -->
            <div class="modal fade" id="editUser" tabindex="-1" aria-hidden="true">
              <div class="modal-dialog modal-lg modal-simple modal-edit-user" style="max-width: 80%;">
                <div class="modal-content">
                  <div class="modal-body">
                    <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                    <div class="mb-4">
                      <h3 style="color: #1c46a3; font-weight: 500;">Add New User</h3>
                    </div>
                    <img
                        class="img-fluid rounded my-4"
                        src="../../sneat/assets/img/avatars/1.png"
                        height="110"
                        width="110"
                        id="img"
                        alt="User avatar" />
                      <label class="btn btn-primary">UPLOAD NEW PHOTO
                        <input type="file" class="form-control required d-none" id="file" name="file" ng-model="Form.file" onchange="mostrar()" required>
                      </label>
                    <form id="formUser" class="row g-3" onsubmit="return false">
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserName">Email / Username</label>
                        <input
                          style="height: 60px;"
                          type="text"
                          id="email"
                          name="modalEditUserName"
                          class="form-control"
                        />
                      </div>
                      <div class="col-md-6">
                        <label class="form-label" for="modalEditUserCountry">Company</label>
                        <select
                          style="height: 60px;"
                          id="company"
                          name="modalEditUserCountry"
                          class="select2 form-select"
                          data-allow-clear="true">
                          
                          <option value="fffd0490-4b52-49e0-8cd0-72471d1e847a">Company Example</option>
                          <option value="a671cb90-7c82-47ad-8204-d778314d55ae">Majo</option>
                          <option value="6e524a1d-bf63-4745-a56c-a0be890c8eca">MajoM</option>
                          <option value="ecf4fac0-2952-490b-9690-4cdf1fefa4e9">MM</option>
                          <option value="8a28ecba-e115-40be-bf4c-57660e198dfd">Striano</option>
                        </select>
                      </div>
                      <div class="col-md-3">
                        <label class="form-label" for="modalEditUserStatus">First Name</label>
                        <input
                        style="height: 60px;"
                        type="text"
                          id="name"
                          name="modalEditUserEmail"
                          class="form-control"
                        />
                      </div>
                      <div class="col-md-3">
                        <label class="form-label" for="modalEditTaxID">Last Name</label>
                        <input
                        style="height: 60px;"
                        type="text"
                          id="last"
                          name="modalEditTaxID"
                          class="form-control modal-edit-tax-id"
                         />
                      </div>
                      <div class="col-md-6">
                        <label class="form-label" for="modalEditUserCountry">Position</label>
                        <select
                        style="height: 60px;"
                        id="position"
                          name="modalEditUserCountry"
                          class="select2 form-select"
                          data-allow-clear="true">
                          
                          <option value="bb36975f-af12-4e4e-9a2d-64393d3cdcca">Developer</option>
                        </select>
                      </div>
                      <div class="col-1" style="padding-top: 38px;">
                        <label class="switch">
                          <input type="radio" onclick="valorGender('Female')" id="female" value="Female" class="switch-input" />
                          <span class="switch-toggle-slider">
                            <span class="switch-on"></span>
                            <span class="switch-off"></span>
                          </span>
                          <span class="switch-label">Female</span>
                        </label>
                      </div>
                      <div class="col-2" style="padding-top: 38px;">
                        <label class="switch">
                          <input type="radio" onclick="valorGender('Male')" id="male" value="Male" class="switch-input" />
                          <span class="switch-toggle-slider">
                            <span class="switch-on"></span>
                            <span class="switch-off"></span>
                          </span>
                          <span class="switch-label">Male</span>
                        </label>
                      </div>
                      <div class="col-md-3">
                        <label class="form-label" for="modalEditUserStatus">Birthday</label>
                        <input
                        style="height: 60px;"
                        type="date"
                          id="birthdate"
                          name="modalEditUserEmail"
                          class="form-control"
                        />
                      </div>
                      <div class="col-2" style="padding-top: 38px;">
                        <label class="switch">
                          <input type="checkbox" id="master" value="true" onclick="valorMaster()" class="switch-input" />
                          <span class="switch-toggle-slider">
                            <span class="switch-on"></span>
                            <span class="switch-off"></span>
                          </span>
                          <span class="switch-label">Is Master</span>
                        </label>
                      </div>
                      <div class="col-2" style="padding-top: 38px;">
                        <label class="switch">
                          <input type="checkbox" id="active" value="true" onclick="valorActive()" class="switch-input" />
                          <span class="switch-toggle-slider">
                            <span class="switch-on"></span>
                            <span class="switch-off"></span>
                          </span>
                          <span class="switch-label">Is Active</span>
                        </label>
                      </div>
                      
                      <div class="col-md-6">
                        <label class="form-label" for="modalEditUserStatus">Phone</label>
                        <input
                        style="height: 60px;"
                          type="text"
                          id="phone"
                          name="modalEditUserEmail"
                          class="form-control"
                        />
                      </div>

                      <div class="col-md-6">
                        <label class="form-label" for="modalEditUserCountry">Role</label>
                        <select
                          style="height: 60px;"
                          id="role"
                          name="modalEditUserCountry"
                          class="select2 form-select"
                          data-allow-clear="true">
                          <option value="bb36975f-af12-4e4e-9a2d-64393d3cdcca">Developer</option>
                        </select>
                      </div>
                      
                      <div class="col-12">
                        <button type="submit" class="btn btn-primary me-sm-3 me-1" data-bs-dismiss="modal" aria-label="Close" onclick="save()">Save Changes</button>
                        <button style="border: 1px solid;"
                          type="reset"
                          class="btn btn-label-secondary"
                          data-bs-dismiss="modal"
                          aria-label="Close"
                          onclick="vaciar()"
                          >
                          Cancel
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal fade" id="detailUser" tabindex="-1" aria-hidden="true">
              <div class="modal-dialog modal-lg modal-simple modal-edit-user" style="max-width: 80%;">
                <div class="modal-content">
                  <div class="modal-body" id="view">
                    
                  </div>
                </div>
              </div>
            </div>
            <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalLabel">Delete</h5>
                  </div>
                  <div class="modal-body">
                    Are you sure you want to delete this user ?
                  </div>
                  <div class="modal-footer">
                    <button style="border: 1px solid;" type="reset" class="btn btn-label-secondary" data-bs-dismiss="modal" aria-label="Close"> Close </button>
                    <button type="submit" class="btn btn-primary me-sm-3 me-1" data-bs-dismiss="modal" aria-label="Close" onclick="eliminar()">confirm</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="row justify-content-center" id="message">
              
            </div>
            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                <div class="mb-2 mb-md-0">
                  Copyrights ©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , Travel 101
                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->

    <script>
      // document.getElementById('location').value = local
      let urlPosition = 'https://t101api.azurewebsites.net/Company/CompanyPosition/getAll'
      let urlCompany = 'https://t101api.azurewebsites.net/Company/getAll'
      let url = 'https://t101api.azurewebsites.net/User/getAll'
      let gender = ''
      let allUser = null
      let isEdit = false
      let dataEdit = null
      let master = false
      let active = false
      let selectedFileBase64 = null
      let dataError = null

      mostrarSelectRole()
      
        fetch(url, {
          headers: {
            "Content-Type": "application/json",
            'access-control-allow-origin': '*',
            'Authorization': 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1ham9Ac3RyaWFuby5pbyIsInN1YiI6ImMzZDU0YzczLTA4MWYtNDg3OC1iOGZiLWU5ZTllOTY0MDJjYiIsIm5iZiI6MTcxNjk1NTc2NCwiZXhwIjoxNzE2OTU2MzY0LCJpYXQiOjE3MTY5NTU3NjQsImlzcyI6Iklzc3VlciIsImF1ZCI6IkF1ZGllbmNlIn0.M3s8ZAOepA78chpAUXzBaSx2cwXkiMBEBbv3tYfkoMshnHGenlTbFLa9BkESOj-K6QvZbd8hx880rMSlfYLh3A',
            'api_key': 'c8b129c2e8c53de7adc8e2d1ede8d5d3'
          },
          })
          .then(response => response.json())
          .then(data => mostrarData(data))
          .catch(error => console.log(error))

        fetch(urlPosition, {
          headers: {
            "Content-Type": "application/json",
            'access-control-allow-origin': '*',
            'Authorization': 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1ham9Ac3RyaWFuby5pbyIsInN1YiI6ImMzZDU0YzczLTA4MWYtNDg3OC1iOGZiLWU5ZTllOTY0MDJjYiIsIm5iZiI6MTcxNjk1NTc2NCwiZXhwIjoxNzE2OTU2MzY0LCJpYXQiOjE3MTY5NTU3NjQsImlzcyI6Iklzc3VlciIsImF1ZCI6IkF1ZGllbmNlIn0.M3s8ZAOepA78chpAUXzBaSx2cwXkiMBEBbv3tYfkoMshnHGenlTbFLa9BkESOj-K6QvZbd8hx880rMSlfYLh3A',
            'api_key': 'c8b129c2e8c53de7adc8e2d1ede8d5d3'
          },
          })
          .then(response => response.json())
          .then(dataPosition => cargarSelectPosition(dataPosition))
          .catch(error => console.log(error))

        fetch(urlCompany, {
          headers: {
            "Content-Type": "application/json",
            'access-control-allow-origin': '*',
            'Authorization': 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1ham9Ac3RyaWFuby5pbyIsInN1YiI6ImMzZDU0YzczLTA4MWYtNDg3OC1iOGZiLWU5ZTllOTY0MDJjYiIsIm5iZiI6MTcxNjk1NTc2NCwiZXhwIjoxNzE2OTU2MzY0LCJpYXQiOjE3MTY5NTU3NjQsImlzcyI6Iklzc3VlciIsImF1ZCI6IkF1ZGllbmNlIn0.M3s8ZAOepA78chpAUXzBaSx2cwXkiMBEBbv3tYfkoMshnHGenlTbFLa9BkESOj-K6QvZbd8hx880rMSlfYLh3A',
            'api_key': 'c8b129c2e8c53de7adc8e2d1ede8d5d3'
          },
          })
          .then(response => response.json())
          .then(dataCompany => cargarSelectCompany(dataCompany))
          .catch(error => console.log(error))

          function convertFileToBase64 (file) {
            const reader = new FileReader()

            reader.onload = () => {
              selectedFileBase64 = reader.result.split(';base64,')[1]
            }

            reader.readAsDataURL(file)
          }

          function mostrar(){
            var archivo = document.getElementById("file").files[0];
            var reader = new FileReader();
            if (file) {
              reader.readAsDataURL(archivo );
              reader.onloadend = function () {
                document.getElementById("img").src = reader.result;
              }
              console.log(reader)              
              console.log(reader.result)
            }
          }

          function valorGender(data)
          {
            gender = data
          }

          function valorMaster()
          {
            master = !master
            mostrarSelectRole()
          }

          function valorActive()
          {
            active = !active
          }

          function mostrarSelectRole()
          {
            fetch('https://t101api.azurewebsites.net/Role/getAll', {
            headers: {
              "Content-Type": "application/json",
              'access-control-allow-origin': '*',
              'Authorization': 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1ham9Ac3RyaWFuby5pbyIsInN1YiI6ImMzZDU0YzczLTA4MWYtNDg3OC1iOGZiLWU5ZTllOTY0MDJjYiIsIm5iZiI6MTcxNjk1NTc2NCwiZXhwIjoxNzE2OTU2MzY0LCJpYXQiOjE3MTY5NTU3NjQsImlzcyI6Iklzc3VlciIsImF1ZCI6IkF1ZGllbmNlIn0.M3s8ZAOepA78chpAUXzBaSx2cwXkiMBEBbv3tYfkoMshnHGenlTbFLa9BkESOj-K6QvZbd8hx880rMSlfYLh3A',
              'api_key': 'c8b129c2e8c53de7adc8e2d1ede8d5d3'
            },
            })
            .then(response => response.json())
            .then(dataPosition => cargarSelectRole(dataPosition))
            .catch(error => console.log(error))
          }

          function cargar() {
            fetch('https://t101api.azurewebsites.net/User/getAll', {
              headers: {
                "Content-Type": "application/json",
                'access-control-allow-origin': '*',
                'Authorization': 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1ham9Ac3RyaWFuby5pbyIsInN1YiI6ImMzZDU0YzczLTA4MWYtNDg3OC1iOGZiLWU5ZTllOTY0MDJjYiIsIm5iZiI6MTcxNjk1NTc2NCwiZXhwIjoxNzE2OTU2MzY0LCJpYXQiOjE3MTY5NTU3NjQsImlzcyI6Iklzc3VlciIsImF1ZCI6IkF1ZGllbmNlIn0.M3s8ZAOepA78chpAUXzBaSx2cwXkiMBEBbv3tYfkoMshnHGenlTbFLa9BkESOj-K6QvZbd8hx880rMSlfYLh3A',
                'api_key': 'c8b129c2e8c53de7adc8e2d1ede8d5d3'
              },
              })
              .then(response => response.json())
              .then(data => mostrarData(data))
              .catch(error => console.log(error))
          }

          function vaciar() {
            isEdit = false
            // document.getElementById("add-new").click()
            document.getElementById("email").value = ''
            document.getElementById("company").value = ''
            document.getElementById("position").value = ''
            document.getElementById("name").value = ''
            document.getElementById("last").value = ''
            // document.getElementById("gender").value = ''
            // document.getElementById("admin").value = ''
            // document.getElementById("master").value = ''
            document.getElementById("birthdate").value = ''
            document.getElementById("phone").value = ''
          }

          function editar(id){
            getPhoto(id)
            isEdit = true
            dataEdit = allUser[id]
            document.getElementById("add-new").click()
            document.getElementById("email").value = allUser[id].email
            document.getElementById("company").value = allUser[id].company.id
            document.getElementById("position").value = allUser[id].companyPosition.id
            document.getElementById("name").value = allUser[id].firstName
            document.getElementById("last").value = allUser[id].lastName
            if (allUser[id].gender.genderType === 'Female') {
              document.forms["formUser"]["female"].checked=true;
              gender = 'Female'              
            } 
            if (allUser[id].gender.genderType === 'Male') {
              document.forms["formUser"]["male"].checked=true;
              gender = 'Male'              
            }
            if (allUser[id].isAdmin) {
              document.getElementById("master").checked = true
              master = true
            }
            if (allUser[id].isActive) {
              document.getElementById("active").checked = true          
            }
            let yourDate = new Date(allUser[id].birthdate)
            yourDate = yourDate.toISOString().split('T')[0]
            console.log(yourDate)
            document.getElementById("birthdate").value = yourDate
            document.getElementById("phone").value = allUser[id].phone
            document.getElementById("last").value = allUser[id].userRole.id
          }

          function save(){
            console.log(gender)
            let data = {
                    "email": document.getElementById("email").value,
                    "firstName": document.getElementById("name").value,
                    "lastName": document.getElementById("last").value,
                    "roleId": document.getElementById("role").value,
                    "isActive": active,
                    "isAdmin": master,
                    "companyId": document.getElementById("company").value,
                    "companyPositionId": document.getElementById("position").value,
                    "phone": document.getElementById("phone").value,
                    "birthday": document.getElementById('birthdate').value,
                    "gender": gender,
                    "photo": "string"
                  }
            if (isEdit) {
              let urlDescription = 'https://t101api.azurewebsites.net/User/update/' + dataEdit.id
              fetch(urlDescription, {
                headers: {
                  "Content-Type": "application/json",
                  'access-control-allow-origin': '*',
                  'Authorization': 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1ham9Ac3RyaWFuby5pbyIsInN1YiI6ImMzZDU0YzczLTA4MWYtNDg3OC1iOGZiLWU5ZTllOTY0MDJjYiIsIm5iZiI6MTcxNjk1NTc2NCwiZXhwIjoxNzE2OTU2MzY0LCJpYXQiOjE3MTY5NTU3NjQsImlzcyI6Iklzc3VlciIsImF1ZCI6IkF1ZGllbmNlIn0.M3s8ZAOepA78chpAUXzBaSx2cwXkiMBEBbv3tYfkoMshnHGenlTbFLa9BkESOj-K6QvZbd8hx880rMSlfYLh3A',
                  'api_key': 'c8b129c2e8c53de7adc8e2d1ede8d5d3'
                },
                method: "PUT",
                body: JSON.stringify(data),
                })
                .then(response => {response.json()
                dataError = response.status})
                .catch((error) => console.error("Error:", error))
                .then(response => {
                  console.log(dataError);
                  console.log(response);
                  if (dataError !== null && dataError > 300 ) {
                      let body = ''
                        body += `
                        <div
                         class="bs-toast toast fade show bg-danger"
                         role="alert"
                         aria-live="assertive"
                         aria-atomic="true"
                       >
                         <div class="toast-header">
                           <i class="bx bx-bell me-2"></i>
                           <div class="me-auto fw-semibold">Error</div>
                           <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                         </div>
                         <div class="toast-body">
                           ${response.message}
                         </div>
                       </div>
                        `
                      document.getElementById('message').innerHTML = body	
                    }
                    else {
                      let body = ''
                        body += `
                        <div
                         class="bs-toast toast fade show bg-success"
                         role="alert"
                         aria-live="assertive"
                         aria-atomic="true"
                       >
                         <div class="toast-header">
                           <i class="bx bx-bell me-2"></i>
                           <div class="me-auto fw-semibold"></div>
                           <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                         </div>
                         <div class="toast-body">
                          User Created
                         </div>
                       </div>
                        `
                      document.getElementById('message').innerHTML = body
                    }
                  vaciar()
                  cargar()
              })
            } else {
              let urlDescription = 'https://t101api.azurewebsites.net/User/create'
              fetch(urlDescription, {
                headers: {
                  "Content-Type": "application/json",
                  'access-control-allow-origin': '*',
                  'Authorization': 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1ham9Ac3RyaWFuby5pbyIsInN1YiI6ImMzZDU0YzczLTA4MWYtNDg3OC1iOGZiLWU5ZTllOTY0MDJjYiIsIm5iZiI6MTcxNjk1NTc2NCwiZXhwIjoxNzE2OTU2MzY0LCJpYXQiOjE3MTY5NTU3NjQsImlzcyI6Iklzc3VlciIsImF1ZCI6IkF1ZGllbmNlIn0.M3s8ZAOepA78chpAUXzBaSx2cwXkiMBEBbv3tYfkoMshnHGenlTbFLa9BkESOj-K6QvZbd8hx880rMSlfYLh3A',
                  'api_key': 'c8b129c2e8c53de7adc8e2d1ede8d5d3'
                },
                method: "POST",
                body: JSON.stringify(data),
                })
                .then(response => {response.json()
                dataError = response.status})
                .catch((error) => console.error("Error:", error))
                .then(response => {
                  console.log(dataError);
                  if (typeof response !== 'string') {
                      let body = ''
                        body += `
                        <div
                         class="bs-toast toast fade show bg-danger"
                         role="alert"
                         aria-live="assertive"
                         aria-atomic="true"
                       >
                         <div class="toast-header">
                           <i class="bx bx-bell me-2"></i>
                           <div class="me-auto fw-semibold">Error</div>
                           <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                         </div>
                         <div class="toast-body">
                           ${response.message}
                         </div>
                       </div>
                        `
                      document.getElementById('message').innerHTML = body	
                    }
                    else {
                      let body = ''
                        body += `
                        <div
                         class="bs-toast toast fade show bg-success"
                         role="alert"
                         aria-live="assertive"
                         aria-atomic="true"
                       >
                         <div class="toast-header">
                           <i class="bx bx-bell me-2"></i>
                           <div class="me-auto fw-semibold"></div>
                           <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                         </div>
                         <div class="toast-body">
                          User Created
                         </div>
                       </div>
                        `
                      document.getElementById('message').innerHTML = body
                    }
                  vaciar()
                  cargar()
                })
            }
          }

          function eliminar(){
              let urlDescription = 'https://t101api.azurewebsites.net/User/delete/' + dataEdit.id
              fetch(urlDescription, {
                headers: {
                  "Content-Type": "application/json",
                  'access-control-allow-origin': '*',
                  'Authorization': 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1ham9Ac3RyaWFuby5pbyIsInN1YiI6ImMzZDU0YzczLTA4MWYtNDg3OC1iOGZiLWU5ZTllOTY0MDJjYiIsIm5iZiI6MTcxNjk1NTc2NCwiZXhwIjoxNzE2OTU2MzY0LCJpYXQiOjE3MTY5NTU3NjQsImlzcyI6Iklzc3VlciIsImF1ZCI6IkF1ZGllbmNlIn0.M3s8ZAOepA78chpAUXzBaSx2cwXkiMBEBbv3tYfkoMshnHGenlTbFLa9BkESOj-K6QvZbd8hx880rMSlfYLh3A',
                  'api_key': 'c8b129c2e8c53de7adc8e2d1ede8d5d3'
                },
                method: "DELETE",
                body: null,
                })
                .then(response => {response.json()
                dataError = response.status})
                .then(response => {
                  console.log(dataError);
                  if (dataError !== null && dataError > 300 ) {
                      let body = ''
                        body += `
                        <div
                         class="bs-toast toast fade show bg-danger"
                         role="alert"
                         aria-live="assertive"
                         aria-atomic="true"
                       >
                         <div class="toast-header">
                           <i class="bx bx-bell me-2"></i>
                           <div class="me-auto fw-semibold">Error</div>
                           <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                         </div>
                         <div class="toast-body">
                           ${response.message}
                         </div>
                       </div>
                        `
                      document.getElementById('message').innerHTML = body	
                    }
                    else {
                      let body = ''
                        body += `
                        <div
                         class="bs-toast toast fade show bg-success"
                         role="alert"
                         aria-live="assertive"
                         aria-atomic="true"
                       >
                         <div class="toast-header">
                           <i class="bx bx-bell me-2"></i>
                           <div class="me-auto fw-semibold"></div>
                           <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                         </div>
                         <div class="toast-body">
                          User Deleted
                         </div>
                       </div>
                        `
                      document.getElementById('message').innerHTML = body
                    }
                    vaciar()
                    cargar()
                })
          }

          function selecItem(id){
            dataEdit = allUser[id]
          }

          function getPhoto(id){
              let urlDescription = 'https://t101api.azurewebsites.net/User/getPhoto/' + allUser[id].id
              fetch(urlDescription, {
                headers: {
                  "Content-Type": "application/json",
                  'access-control-allow-origin': '*',
                  'Authorization': 'Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1ham9Ac3RyaWFuby5pbyIsInN1YiI6ImMzZDU0YzczLTA4MWYtNDg3OC1iOGZiLWU5ZTllOTY0MDJjYiIsIm5iZiI6MTcxNjk1NTc2NCwiZXhwIjoxNzE2OTU2MzY0LCJpYXQiOjE3MTY5NTU3NjQsImlzcyI6Iklzc3VlciIsImF1ZCI6IkF1ZGllbmNlIn0.M3s8ZAOepA78chpAUXzBaSx2cwXkiMBEBbv3tYfkoMshnHGenlTbFLa9BkESOj-K6QvZbd8hx880rMSlfYLh3A',
                  'api_key': 'c8b129c2e8c53de7adc8e2d1ede8d5d3'
                },
                body: null,
                })
                .then(response => {response.json()
                dataError = response.status})
                .then(response => {
                  console.log(response);
                })
          }

          const mostrarData = (data) => {
            allUser = data
            let body = ''
            // let length = data.length > 10 ? 10 : data.length
            for (let i = 0; i < allUser.length; i++) {
              allUser[i].order = i
              body += `
                          <tr>
                            <td>
                              <ul class="list-unstyled users-list m-0 avatar-group d-flex align-items-center">
                                <li
                                  data-bs-toggle="tooltip"
                                  data-popup="tooltip-custom"
                                  data-bs-placement="top"
                                  class="avatar avatar-xs pull-up"
                                  title="Lilian Fuller"
                                >
                                  <img src="../assets/img/avatars/6.png" alt="Avatar" class="rounded-circle" />
                                </li>
                              </ul>
                            </td>
                            <td><a style="cursor:pointer;" data-bs-target="#detailUser" data-bs-toggle="modal" onclick="verDetalle(${allUser[i].order})">${allUser[i].email}</a></td>
                            <td>${allUser[i].company.legalName}</td>
                            <td>${allUser[i].userRole.roleName}</td>
                            <td>${allUser[i].birthdate}</td>
                            <td>${allUser[i].gender.genderType}</td>
                            <td>${allUser[i].phone}</td>
                            ${allUser[i].isActive ? '<td><span class="badge bg-label-success ">ACTIVE</span></td>' : '<td><span class="badge bg-label-warning ">INACTIVE</span></td>'}
                            <td>
                              <a style="cursor:pointer;" onclick="editar(${allUser[i].order})"><i class="bx bx-edit"></i></a><a style="cursor:pointer;" data-bs-target="#confirmModal" data-bs-toggle="modal" onclick="selecItem(${allUser[i].order})"><i class="bx bx-trash "></i></a>
                            </td>
                          </tr>
              `
            }

            document.getElementById('dataCompany').innerHTML = body
          }

          function verDetalle(id) 
          {
            let data = allUser[id]
            let body = ''
            body += `
            <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                    <div class="mb-4">
                      <h3 style="color: #1c46a3; font-weight: 500;">View User Details</h3>
                    </div>
                    <div class="row p-4">
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserName"><b>Email / Username:</b> ${' ' + data.email}</label>
                      </div>
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserCountry"><b>Company:</b> ${' ' + data.company.legalName}</label>
                      </div>
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserStatus"><b>First Name:</b> ${' ' + data.firstName}</label>
                      </div>
                      <div class="col-6">
                        <label class="form-label" for="modalEditTaxID"><b>Last Name:</b> ${' ' + data.lastName}</label>
                      </div>
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserCountry"><b>Position:</b> ${' ' + data.companyPosition.companyPositionName}</label>
                      </div>
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserStatus"><b>Gender:</b> ${' ' + data.gender.genderType}</label>
                      </div>
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserStatus"><b>Birthday:</b> ${' ' + data.birthdate}</label>
                      </div>
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserStatus"><b>Is Master:</b> ${' ' + data.isAdmin ? 'Yes' : 'No'}</label>
                      </div>
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserStatus"><b>Is Active:</b> ${' ' + data.isActive ? 'Yes' : 'No'}</label>
                      </div>
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserStatus"><b>Phone:</b> ${' ' + data.phone}</label>
                      </div>
                      <div class="col-6">
                        <label class="form-label" for="modalEditUserCountry"><b>Role:</b> ${' ' + data.userRole.roleName}</label>
                      </div>
                      
                      <div class="col-12">
                        <button style="border: 1px solid;"
                          type="reset"
                          class="btn btn-label-secondary"
                          data-bs-dismiss="modal"
                          aria-label="Close"
                          >
                          Close
                        </button>
                      </div>
                    </div>
              `
            document.getElementById('view').innerHTML = body
          }

          const cargarSelectRole = (data) => {
            let body = '<option></option>'
            for (let i = 0; i < data.length; i++) {
              body += `
              <option value="${data[i].id}">${data[i].roleName}</option>
              `
            }

            document.getElementById('role').innerHTML = body
          }
          
          const cargarSelectCompany = (data) => {
            let body = '<option></option>'
            for (let i = 0; i < data.length; i++) {
              body += `
              <option value="${data[i].id}">${data[i].legalName}</option>
              `
            }

            document.getElementById('company').innerHTML = body
          }
          
          const cargarSelectPosition = (data) => {
            let body = '<option></option>'
            for (let i = 0; i < data.length; i++) {
              body += `
              <option value="${data[i].id}">${data[i].companyPositionName}</option>
              `
            }

            document.getElementById('position').innerHTML = body
          }
    </script>
    

    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="../assets/vendor/libs/jquery/jquery.js"></script>
    <script src="../assets/vendor/libs/popper/popper.js"></script>
    <script src="../assets/vendor/js/bootstrap.js"></script>
    <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>

    <script src="../assets/vendor/js/menu.js"></script>
    <!-- endbuild -->

    <!-- Vendors JS -->

    <!-- Main JS -->
    <script src="../assets/js/main.js"></script>

    <!-- Page JS -->

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </body>
</html>
